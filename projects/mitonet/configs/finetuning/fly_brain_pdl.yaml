BASE: "../hpo/batch4_epochs50_base.yaml"

DATASET:
  dataset_name: "FlyBrainFT"
  class_names: [ "mito" ]
  norms: { mean: 0.508979, std: 0.148561 }

TRAIN:
  # image and model directories
  train_dir: "/data/IASEM/conradrw/data/panoptic/test3d/finetuning/fly_brain_ft/"
  additional_train_dirs: null
    
  model_dir: "/data/IASEM/conradrw/models/fly_brain_pdl_finetune"
  save_freq: 50
  
  # path to .pth file for resuming training
  resume: null
  
  # pretraining parameters
  encoder_pretraining: null
  #encoder_pretraining: "/data/IASEM/conradrw/models/pretrained_models/cem1.5m_swav_resnet50_200ep.pth.tar"
  #whole_pretraining: null
  whole_pretraining: "/data/IASEM/conradrw/models/PDPR_epoch50_base_batch4b/batch4_epochs50_base_checkpoint.pth.tar"
  finetune_layer: "all"
  
  # set the lr schedule
  lr_schedule: "OneCycleLR"
  schedule_params:
    max_lr: 0.003
    epochs: 50
    steps_per_epoch: 1
    pct_start: 0.3

  # dataset parameters
  batch_size: 64
  weight_gamma: null
  workers: 8
  
  augmentations:
    - { aug: "RandomScale", scale_limit: [ -0.5, 1 ]}
    - { aug: "PadIfNeeded", min_height: 256, min_width: 256, border_mode: 0 }
    #- { aug: "RandomResizedCrop", height: 256, width: 256, scale: [ 0.5, 2 ], ratio: [ 0.8, 1.2 ] }
    - { aug: "RandomCrop", height: 256, width: 256}
    - { aug: "Rotate", limit: 180, border_mode: 0 }
    - { aug: "RandomBrightnessContrast", brightness_limit: 0.2, contrast_limit: 0.2 }
    - { aug: "HorizontalFlip" }
    - { aug: "VerticalFlip" }
  
EVAL:
  eval_dir: "/data/IASEM/conradrw/data/panoptic/test3d/finetuning/fly_brain_ft/"
  eval_track_indices: null
  eval_track_freq: 50
  epochs_per_eval: 50